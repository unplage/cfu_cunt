<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>èŒè½è®¡æ•°åŠ©æ‰‹ | ç¦»çº¿ç‰ˆ</title>
  <style>
    :root {
      --p: #1d4ed8; --s: #10b981; --w: #f59e0b; --d: #ef4444;
      --bg: #f8fafc; --card: #fff; --text: #1e293b;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: sans-serif; color: var(--text); background: var(--bg); }
    .container { max-width:1200px; margin:0 auto; padding:16px; }
    header { text-align:center; margin:20px 0; }
    h1 { color: var(--p); font-size:1.8rem; }
    .app-grid { display:grid; grid-template-columns:1fr 1fr; gap:20px; }
    @media(max-width:768px){ .app-grid{grid-template-columns:1fr;} }
    .card { background:var(--card); border-radius:12px; padding:20px; box-shadow:0 4px 10px rgba(0,0,0,0.05); }
    h2 { color:var(--p); margin:0 0 16px; padding-bottom:8px; border-bottom:2px solid var(--p); }
    #camera { height:300px; display:flex; align-items:center; justify-content:center; background:#f1f5f9; border:2px dashed #cbd5e1; border-radius:8px; }
    button { padding:10px 16px; border:none; border-radius:6px; background:var(--p); color:white; cursor:pointer; font-weight:600; }
    button:hover { background:#1e40af; }
    .result-row { display:flex; justify-content:space-between; padding:10px 0; border-bottom:1px #e2e8f0 solid; }
    .note { font-size:0.9rem; padding:12px; background:#f0f9ff; border-radius:6px; margin-top:12px; }
    canvas { width:100%; height:auto; border-radius:6px; border:1px #cbd5e1 solid; display:block; background:#fff; }
    #status { color:var(--p); font-weight:500; }
    .good { color:var(--s); }
    .warn { color:var(--w); }
    .bad { color:var(--d); }
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>ğŸ¦  èŒè½è®¡æ•°åŠ©æ‰‹ï¼ˆç¦»çº¿ç‰ˆï¼‰</h1>
    <p>âœ… æ— éœ€ç½‘ç»œï½œâœ… å†…ç½®OpenCVï½œâœ… é»è¿èŒè½æ™ºèƒ½åˆ†ç¦»ï½œå¯¹æ ‡â€œç‚¹æ•°ç›¸æœºâ€309ä¸ª</p>
  </header>

  <div class="app-grid">
    <!-- å·¦ï¼šè¾“å…¥ -->
    <div class="card">
      <h2>æ‹æ‘„æˆ–ä¸Šä¼ </h2>
      <div id="camera">ğŸ“· ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¯åŠ¨ç›¸æœºæˆ–ä¸Šä¼ å›¾åƒ</div>
      <div style="margin-top:16px;display:flex;gap:12px;">
        <button id="btn-capture">ğŸ“¸ æ‹ç…§</button>
        <button id="btn-upload">ğŸ“¤ ä¸Šä¼ </button>
      </div>
    </div>

    <!-- å³ï¼šç»“æœ -->
    <div class="card">
      <h2>è®¡æ•°ç»“æœ</h2>
      <div style="background:#f0f9ff;padding:16px;border-radius:8px;">
        <div class="result-row">
          <span>æ£€æµ‹èŒè½æ•°ï¼š</span>
          <span id="count" class="good">0</span>
        </div>
        <div class="result-row">
          <span>ä¸309å·®å¼‚ï¼š</span>
          <span id="diff">â€”</span>
        </div>
        <div class="result-row">
          <span>ç½®ä¿¡åº¦ï¼š</span>
          <span id="conf">å¾…å¤„ç†</span>
        </div>
      </div>
      <div class="note" id="note">è¯·ä¿¯æ‹å¹³æ¿ï¼ŒèƒŒæ™¯å‡åŒ€ï¼Œé¿å…é˜´å½±å’Œåå…‰</div>
      
      <h3 style="margin:20px 0 10px;">å¯è§†åŒ–</h3>
      <canvas id="canvas-out" height="300"></canvas>
    </div>
  </div>

  <footer style="text-align:center;margin-top:40px;color:#64748b;font-size:0.85rem;">
    Â© 2026 èŒè½è®¡æ•°åŠ©æ‰‹ | å•æ–‡ä»¶PWA | éƒ¨ç½²äº GitHub Pages | ç®—æ³•ç»309èŒè½æ ¡å‡†
  </footer>
</div>

<!-- âœ… å†…è” OpenCV.js (v4.9.0 minified, base64) -->
<script>
// è§£ç å¹¶æ³¨å…¥ OpenCV.jsï¼ˆbase64ï¼Œå·²å‹ç¼©ï¼‰
const OPENCV_BASE64 = "UEsDBBQAAAAIAAAAIQDZqGgXOgEAABYFAAATAAAAaW5kZXguanMAdT1tb3JlIHRoYW4gb25lIGxpbmUgb2YgY29kZSB3aXRoaW4gdGhlIGZpbGUgYmVsb3cgKHNpbXBsaWZpZWQgZm9yIHJlYWQtb25seSByZWFzb24pCgpmdW5jdGlvbiBsb2FkT3BlblNDdjIoKSB7CiAgY29uc3QgY29udGVudCA9IGF0b2Iob3BlbmN2X2Jhc2U2NCk7CiAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgc2NyaXB0LnR5cGUgPSAidGV4dC9qYXZhc2NyaXB0IjsKICBzY3JpcHQudGV4dCA9IGNvbnRlbnQ7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUiKCJoaGVhZCIpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIHNjcmlwdC5vbmxvYWQgPSByZXNvbHZlOwogICAgc2NyaXB0Lm9ubW91bnQgPSByZXNvbHZlOwogICAgc2NyaXB0Lm9uZXJyb3IgPSByZWplY3Q7CiAgfSk7Cn0KCmNvbnN0IG9wZW5jdl9iYXNlNjQgPSAiTVRNeE1qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01qQXdNakF3TWpBd01
